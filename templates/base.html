{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block head_title %}Django + Stripe Subscriptions{% endblock %}</title>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    {% block extra_head %}{% endblock %}
</head>

<body>
    <nav class="navbar navbar-light bg-light mb-4">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'subscriptions-home' %}">
                <img src="{% static 'logo.png' %}" width="50" height="50" class="d-inline-block align-top mr-2"
                    alt="Logo">
                <span class="h3 mb-0">Georgia Auction Alert Archive</span>
            </a>
            {% if request.user.is_authenticated %}
            {% block nav_user_actions %}
            <span class="navbar-text mr-3">
                Welcome, {{ request.user.username }}
                <a href="{% url 'alerts' %}" class="btn btn-info btn-sm ml-2">Alerts</a>
                <a href="{% url 'account_logout' %}" class="btn btn-outline-secondary btn-sm ml-2">Logout</a>
            </span>
            {% endblock %}
            {% endif %}

            {% if not request.user.is_authenticated %}
            <div class="form-inline">
                <span class="navbar-text mr-2">Subscribe for alerts and access to future auctions!</span>
                <a href="{% url 'account_signup' %}" class="btn btn-primary btn-sm">
                    Subscribe
                </a>
                <a href="{% url 'account_login' %}" class="btn btn-outline-primary btn-sm ml-2">
                    Login
                </a>
            </div>
            {% endif %}
        </div>
    </nav>
    <div class="container mt-5">
        {% if messages %}
        <div>
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} auto-dismiss">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% block content %}{% endblock %}
    </div>
    <script>
        // Auto-dismiss Django messages after 2 seconds
        $(document).ready(function () {
            setTimeout(function () {
                $('.alert.auto-dismiss').fadeOut('slow');
            }, 2000);
        });
    </script>
</body>

</html>